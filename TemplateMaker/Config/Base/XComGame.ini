;---------------------------------------------------------------------------------------
; XComGame.ini - TemplateMaker Multi-Phase Configuration
; Configures the Community Highlander DLC Run Order system for TemplateMaker's
; three-phase architecture (First, Standard, Last)
;---------------------------------------------------------------------------------------

; TemplateMaker First Phase - Early Initialization
; Runs first to establish foundational systems that other mods should see
[TemplateMaker.X2DLCInfo_TemplateMaker_First]
DLCIdentifier="TemplateMaker_First"

[TemplateMaker_First CHDLCRunOrder]
+RunAfter=WOTCIridarTemplateMaster
RunPriorityGroup=RUN_FIRST
; Early initialization - runs before most other mods
; Sets up core infrastructure, API registry, mod detection

; TemplateMaker Standard Phase - Main Processing
; Runs in standard order for main template operations and mod integration
[TemplateMaker.X2DLCInfo_TemplateMaker_Standard]
DLCIdentifier="TemplateMaker_Standard"

[TemplateMaker_Standard CHDLCRunOrder]
+RunAfter=WOTCIridarTemplateMasterStandard
RunPriorityGroup=RUN_STANDARD
; Standard processing - runs with most other mods
; Handles main template processing, API compatibility, primary operations

; TemplateMaker Last Phase - Final Processing
; Runs last to ensure TemplateMaker gets the final word on template modifications
[TemplateMaker.X2DLCInfo_TemplateMaker_Last]
DLCIdentifier="TemplateMaker_Last"

[TemplateMaker_Last CHDLCRunOrder]
+RunAfter=XCOM2RPGOverhaul
+RunAfter=DualWieldedPistols
+RunAfter=DualWieldMelee
+RunAfter=PrimarySecondaries
+RunAfter=TruePrimarySecondaries
+RunAfter=zzzWeaponSkinReplacer
+RunAfter=WOTCUnderbarrelAttachments
+RunAfter=zzzWeaponSkinReplacer
+RunAfter=WOTCIridarTemplateMasterLast
RunPriorityGroup=RUN_LAST
; Final processing - runs after most other mods
; Performs final compatibility checks, validation, cleanup, comprehensive reporting

;---------------------------------------------------------------------------------------
; Legacy Compatibility Sections
; These sections maintain backward compatibility with existing configuration files
; while the multi-phase system is being established
;---------------------------------------------------------------------------------------

; Template Master compatibility (maintained for legacy support)
[WOTCIridarTemplateMaster.X2DLCInfo_First]
; Legacy Template Master First phase compatibility
; TemplateMaker will process these configurations in First phase

[WOTCIridarTemplateMaster.X2DLCInfo_Standard]
; Legacy Template Master Standard phase compatibility
; TemplateMaker will process these configurations in Standard phase

[WOTCIridarTemplateMaster.X2DLCInfo_Last]
; Legacy Template Master Last phase compatibility
; TemplateMaker will process these configurations in Last phase

; Weapon Skin Replacer compatibility (maintained for legacy support)
[zzzWeaponSkinReplacer.X2DownloadableContentInfo_WeaponSkinReplacer]
; Legacy WSR compatibility
; TemplateMaker will process these configurations in Standard phase

;---------------------------------------------------------------------------------------
; TemplateMaker Unified API Sections
; These sections define TemplateMaker's unified API format that consolidates
; functionality from multiple legacy template modification systems
;---------------------------------------------------------------------------------------

; TemplateMaker Template Creator - Unified template creation system
[TemplateMaker.TM_TemplateCreator]
; Unified template creation format
; Consolidates functionality from multiple template creation mods
; Processed in Standard phase

; TemplateMaker Template Editor - Unified template editing system
[TemplateMaker.TM_TemplateEditor]
; Unified template editing format
; Consolidates functionality from Template Master and similar mods
; Processed in Standard phase

; TemplateMaker Weapon Skin Replacer - Enhanced weapon skin replacement
[TemplateMaker.TM_WeaponSkinReplacer]
; Enhanced weapon skin replacement format
; Consolidates and improves upon WSR functionality
; Processed in Standard phase

;---------------------------------------------------------------------------------------
; Multi-Phase Processing Configuration
; These settings control how the multi-phase system operates
;---------------------------------------------------------------------------------------

; Phase Dependencies and Validation
; The multi-phase system automatically validates that phases complete in order:
; 1. First Phase: Early initialization, core systems, API registry
; 2. Standard Phase: Main processing, template operations, mod integration
; 3. Last Phase: Final validation, cleanup, comprehensive reporting

; Performance Monitoring
; Each phase includes comprehensive performance monitoring and logging
; Enable debug commands in TemplateMaker configuration to see detailed metrics

; Error Handling
; The multi-phase system includes robust error handling and rollback mechanisms
; If a phase fails, subsequent phases will be notified and can adjust accordingly

;---------------------------------------------------------------------------------------
; Integration with Community Highlander
; This configuration leverages the X2WOTCCommunityHighlander's DLC Run Order system
; to ensure proper execution sequencing across all installed mods
;---------------------------------------------------------------------------------------

; Run Order Benefits:
; - Predictable execution order regardless of mod load order
; - Clear integration points for other mods
; - Reduced conflicts through controlled sequencing
; - Better compatibility with complex mod setups

; Other Mod Integration:
; Other mods can specify run order relative to TemplateMaker phases:
; +RunAfter=TemplateMaker_First    ; Run after TemplateMaker's early initialization
; +RunBefore=TemplateMaker_Last    ; Run before TemplateMaker's final processing
; +RunAfter=TemplateMaker_Standard ; Run after TemplateMaker's main processing

;---------------------------------------------------------------------------------------
; Migration Notes
; This multi-phase architecture replaces the previous single-phase system
; (X2DownloadableContentInfo_TemplateMaker.uc) with enhanced capabilities:
;
; Enhanced Features:
; - Better template processing control through phased execution
; - Improved mod compatibility through clear integration points
; - Comprehensive validation and error handling
; - Detailed performance monitoring and reporting
; - Strategic conflict resolution with TemplateMaker getting the last word
;
; Backward Compatibility:
; - All existing configuration formats remain supported
; - Legacy mod configurations are automatically processed
; - No changes required to existing TemplateMaker configurations
; - Smooth migration path for users and mod authors
;---------------------------------------------------------------------------------------
